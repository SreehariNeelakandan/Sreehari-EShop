
<style>
  .search-wrapper {
    display: flex;
    flex-direction: column;
    gap: .25rem;
  }
  .card {
    border-bottom: 0.4px solid black;
    /* background-color: white; */
    padding: 2.0rem;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
  .card>.header {
    margin-bottom: .25rem;
  }
  .card>.body {
    font-size: .8rem;
    color: #777;
  }
  .hide {
    display: none;
  }
  .sdiv {
    position: absolute;
    z-index: 100;
    top: 126px;
    transform: translateX(83%);
    width:  570px;
  }
  .searchBar {
    z-index: 3;
  }
</style>













<div class="page-wrapper">
    <header class="header header-intro-clearance header-4">
        <div class="header-top ">
            <div class="container">
                <div class="header-left">
                    <a href="tel:#"><i class="icon-phone"></i>Call: +0123 456 789</a>
                    <!-- <img src="/assets/images/uptownlogo.jpg" style="width:120px;" alt=""> -->
                </div><!-- End .header-left -->

                <div class="header-right">

                    <ul class="top-menu">
                        <li>
                            <a href="#">Links</a>
                            <ul>
                                <li>
                                    <!-- <div class="header-dropdown">
                                        <a href="#">USD</a>
                                        <div class="header-menu">
                                            <ul>
                                                <li><a href="#">Eur</a></li>
                                                <li><a href="#">Usd</a></li>
                                            </ul>
                                        </div>End .header-menu -->
                                    <!-- </div> -->
                                </li>
                                <li>
                                    <div class="">
                                        <a href="/wishlist">wishlist ðŸ–¤</a>
                                        <!-- <div class="header-menu">
                                            <ul>
                                                <li><a href="#">English</a></li>
                                                <li><a href="#">French</a></li>
                                                <li><a href="#">Spanish</a></li>
                                            </ul>
                                        </div>End .header-menu -->
                                    </div>
                                </li>
                             <% if(locals.user){ %> 
                                
                                <li><a  ><button class="btn-primary" onclick="swalsignout()">LOGOUT</button></a></li>

                                
                              <% } else { %> 
                                <li><a href="/login" ><button class="btn-primary">LOGIN</button></a></li>
                                    <% } %> 
                            
                                    <div class="dropdown cart-dropdown">
                                        <a href="/cart" class="dropdown-toggle"  a>
                                            <div class="icon">
                                                <i class="icon-shopping-cart"></i>
                                                <span id="cart-count" class="cart-count"><%= locals.cartCount %> </span>
                                            </div>
                                            <p>Cart</p>
                                        </a>
                    
                                        <div class="mx-5 my-2" >
                                            <li><a href="/profile"  ><img style="width:40px ; height:auto;"  src="/assets/images/user.png" alt=""></a></li>
            
                                              </div>
                                    </div><!-- End .dropdown-menu -->
                              
                            </ul>
                        </li>
                    </ul><!-- End .top-menu -->
                </div><!-- End .header-right -->

            </div><!-- End .container -->
        </div><!-- End .header-top -->

        <div class="header-middle">
            <div class="container">
                <div class="header-left">
                    <button class="mobile-menu-toggler">
                        <span class="sr-only">Toggle mobile menu</span>
                        <i class="icon-bars"></i>
                    </button>
                    
                    <img src="/assets/images/sreehari's eshop.jpg" class="footer-logo mt-2" alt="Footer Logo" width="140" height="50" >
                </div><!-- End .header-left -->

                <!-- <div class="header-center">
                    <div class="header-search header-search-extended header-search-visible d-none d-lg-block">
                        <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                        <form action="#" method="get">
                            <div class="header-search-wrapper search-wrapper-wide">
                                <label for="q" class="sr-only">Search</label>
                                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                                <input type="search" class="form-control"  onkeyup="closeSearch()"  name="q" id="q" data-search placeholder="Search product ..." required>
                            </div>
                            End .header-search-wrapper
                        </form>
                    </div>
                    End .header-search
                </div> -->



                <div class="header-center searchFullBox" style="position: relative;">
                  <div class="header-search header-search-extended header-search-visible d-none d-lg-block" >
                    <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                    <form action="#">
                      <div class="header-search-wrapper search-wrapper-wide" style="border-radius: 0px !important; position: relative;">
                        <label for="search" class="sr-only">Search</label>
                        <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                        <input onkeyup="closeSearch()" autocomplete="off" type="search" class="form-control searchBar" name="q" id="search" data-search placeholder="Search product ..." required>
                      </div><!-- End .header-search-wrapper -->
                    </form>
                  </div><!-- End .header-search -->
                </div>
          






                <div class="header-right">
                   <!-- End .cart-dropdown -->
                </div><!-- End .header-right -->
            </div><!-- End .container -->
        </div><!-- End .header-middle -->

        <div class="header-bottom sticky-header">
            <div class="container">
                <div class="header-left">
                    <div class="dropdown category-dropdown">
                        <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" title="Browse Categories">
                            Browse Categories <i class="icon-angle-down"></i>
                        </a>

                        <!-- <div class="dropdown-menu">
                            <nav class="side-nav">
                                <ul class="menu-vertical sf-arrows">
                                    <li class="item-lead"><a href="#">Daily offers</a></li>
                                    <li class="item-lead"><a href="#">Gift Ideas</a></li>
                                    <li><a href="#">Beds</a></li>
                                    <li><a href="#">Lighting</a></li>
                                    <li><a href="#">Sofas & Sleeper sofas</a></li>
                                    <li><a href="#">Storage</a></li>
                                    <li><a href="#">Armchairs & Chaises</a></li>
                                    <li><a href="#">Decoration </a></li>
                                    <li><a href="#">Kitchen Cabinets</a></li>
                                    <li><a href="#">Coffee & Tables</a></li>
                                    <li><a href="#">Outdoor Furniture </a></li> -->
                                <!-- </ul>End .menu-vertical -->
                            <!-- </nav>End .side-nav -->
                        <!-- </div>End .dropdown-menu -->
                    </div><!-- End .category-dropdown -->
                </div><!-- End .header-left -->

                <div class="header-center">
                    <nav class="main-nav">
                        <ul class="menu sf-arrows">
                            <li class="megamenu-container active">
                                <a href="/" class="sf-with-ul">Home</a>

                               <!-- End .megamenu -->
                            </li>
                            <li>
                                <a href="/shop" class="sf-with-ul">Shop</a>

                             
                            </li>
                            <li>
                                <a href="/orders" class="sf-with-ul">Orders</a>

                                <div class="megamenu megamenu-sm">
                                    <div class="row no-gutters">
                                        <div class="col-md-6">
                                          
                                        </div><!-- End .col-md-6 -->

                                        <div class="col-md-6">
                                            
                                        </div><!-- End .col-md-6 -->
                                    </div><!-- End .row -->
                                </div><!-- End .megamenu megamenu-sm -->
                            </li>
                            <li>
                                <a href="#" class="sf-with-ul">Pages</a>

                              
                            </li>
                            <li>
                                <a href="#" class="sf-with-ul">Blog</a>

                              
                            </li>
                            <li>
                                <a href="#" class="sf-with-ul">Elements</a>

                             
                            </li>
                        </ul><!-- End .menu -->
                    </nav><!-- End .main-nav -->
                </div><!-- End .header-center -->

                <div class="header-right">
                    <i class="la la-lightbulb-o"></i><p>Clearance<span class="highlight">&nbsp;Up to 30% Off</span></p>
                </div>
            </div><!-- End .container -->
        </div><!-- End .header-bottom -->
    </header><!-- End .header -->

    <!-- FOR SEARCH IN SHOP PAGE -->
  
    <!-- <div class=" mx-auto sdiv">
        <div class="user-cards" data-user-cards-container></div>
        <template data-user-template>
          <div class="card" id="cardSearch" onclick="myFunction(this.querySelector('p'))" style="position: relative;">
            <div class="header" data-header></div>
            <div class="body" data-body></div>
            <p class="_id" id="idSearch" hidden data-id></p>
            <img data-img src="" style="height: 50px; width:50px; position: absolute; right: 10px;">
          </div>
        </template>
      </div> -->

      <div class=" sdiv d-none d-lg-block">
        <div class="user-cards" data-user-cards-container></div>
        <template data-user-template >
          <div class="card" id="cardSearch" onclick="myFunction(this.querySelector('p'))" style="position: relative;">
            <div class="header" data-header></div>
            <div class="body" data-body></div>
            <p class="_id" id="idSearch" hidden data-id></p>
            <img data-img src="" style="height: 40px;padding-bottom:4px ; width:40px; position: absolute; right: 10px;">
          </div>
        </template>
      </div>

       <!-- FOR SEARCH IN SHOP PAGE END -->  

    <!-- <script>

 const userCardTemplate=document.querySelector("[data-user-template]")
 
 const userCardContainer=document.querySelector("[ data-user-cards-container]")
 const searchInput=document.querySelector("[data-search]")
 let booleanSearch=userCardContainer.classList
 if(searchInput.value.trim().length==0){
    booleanSearch.add("hide")
 }else{
    booleanSearch.add("hide")
 }

let products=[new Set()]

searchInput.addEventListener("input",e=>{
const value=e.target.value.trim().toLowerCase()
   products.forEach(product=>{
    const isVisible=product.name.toLowerCase().includes(value)||product.catogory.toLowerCase().includes(value)
    product.element.classList.toggle("hide",!isVisible)
    console.log(products,"valllllllll");
})


})



        fetch('/getProductData',{
            method:'get',
            headers: {
        'Content-Type': 'application/json',
      },
      
        }).then(res=>res.json())
        .then((data)=>{

           
         products= data.map(product=>{
         let card=userCardTemplate.content.cloneNode(true).children[0]
         console.log(product,"carrrrrd");
         const header=card.querySelector("[data-header]")
         const body=card.querySelector("[data-body]")
         const id=card.querySelector("[data-id]")
         const image=card.querySelector("[data-img]")
         header.textContent=product.name
         body.textContent=product.catogory
         id.textContent=product._id
         image.src=`/productimages/${product.img[0]}`
        //  userCardContainer.append(card)
         return{name:product.name,
            catogory:product.catogory,
            id:product._id,
            element:card}
         
            })
          
        })


        // newwwww

        function myFunction(input) {
    let tag = input.innerText
    location.href = `/product/${tag}`
  }
  function closeSearch() {
    let boolSearch = userCardContainer.classList
    if (searchInput.value.trim().length == 0) {
      boolSearch.add("hide")
    } else {
      boolSearch.remove("hide")
    }
  }







 

    </script> -->

    <script>
        const userCardTemplate = document.querySelector("[data-user-template]")
      const userCardContainer = document.querySelector("[data-user-cards-container]")
      const searchInput = document.querySelector("[data-search]")
      let boolSearch = userCardContainer.classList
      if (searchInput.value.trim().length == 0) {
        boolSearch.add("hide")
      } else {
        boolSearch.remove("hide")
      }
      let products = [new Set()]
      searchInput.addEventListener("input", e => {
        const value = e.target.value.trim().toLowerCase()
        console.log(products,"=>pro");
        products.forEach(product => {
          const isVisible = product.name.toLowerCase().includes(value) || product.category.includes(value)
          product.element.classList.toggle("hide", !isVisible)
        })
      })
        fetch("/getProductData", {
          method: 'get',
          headers: {
            'Content-Type': 'application/json',
          },
        })
        .then(res => res.json())
        .then(data => {
            console.log(data,"dddddddddddddaaaaaaaaattttttta");
          products = data.map(product => {
            const card = userCardTemplate.content.cloneNode(true).children[0]
            const header = card.querySelector("[data-header]")
            const body = card.querySelector("[data-body]")
            const id = card.querySelector("[data-id]")
            const image = card.querySelector("[data-img]")
            header.textContent = product.name
            body.textContent = product.catagory
            id.textContent = product._id
            image.src = `/productimages/${product.img[0]}`
            userCardContainer.append(card)
            return {
              name: product.name,
              category: product.catogory,
              id: product._id,
              element: card
            }
          })
        })
      function myFunction(input) {
        let tag = input.innerText
        location.href = `/products/${tag}`
      }
      function closeSearch() {
        let boolSearch = userCardContainer.classList
        if (searchInput.value.trim().length == 0) {
          boolSearch.add("hide")
        } else {
          boolSearch.remove("hide")
        }
      }

      function swalsignout(){

Swal.fire({
title: 'Are you sure?',
text: "you will be logout",
icon: 'warning',
showCancelButton: true,
confirmButtonColor: '#3085d6',
cancelButtonColor: '#d33',
confirmButtonText: 'Yes,LogOut!'
}).then((result) => {
if (result.isConfirmed) {
Swal.fire(
  'successfully logout!',
  '',
  'success'
).then(()=>{
     location.href="/logout"
})
}
})
      }
    
      </script>